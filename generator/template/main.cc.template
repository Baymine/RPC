#include <google/protobuf/service.h>
#include "tinyrpc/comm/start.h"

#include "${SERVICE_HEAD_FILE}"

int main(int argc, char* argv[]) {
  if (argc != 2) {
    printf("Start ${PROJ_NAME} server error, input argc is not 2!");
    printf("Start ${PROJ_NAME} like this: \n");
    printf("./${PROJ_NAME} ${PROJ_NAME}.xml\n");
    return 0;
  }

  tinyrpc::InitConfig(argv[1]);

  REGISTER_SERVICE(${CLASS_NAME});

  tinyrpc::StartRpcServer();
  
  return 0;
}
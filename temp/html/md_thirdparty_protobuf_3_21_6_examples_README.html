<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Protocol Buffers - Code Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Protocol Buffers - Code Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This directory contains example code that uses Protocol Buffers to manage an address book. Two programs are provided for each supported language. The add_person example adds a new person to an address book, prompting the user to input the person's information. The list_people example lists people already in the address book. The examples use the exact same format in all three languages, so you can, for example, use add_person_java to create an address book and then use list_people_python to read it.</p>
<p>These examples are part of the Protocol Buffers tutorial, located at: <a href="https://developers.google.com/protocol-buffers/docs/tutorials">https://developers.google.com/protocol-buffers/docs/tutorials</a></p>
<h1><a class="anchor" id="autotoc_md110"></a>
Build the example using bazel</h1>
<p>The example requires bazel 0.5.4 or newer to build. You can download/install the latest version of bazel from bazel's release page: </p><pre class="fragment">https://github.com/bazelbuild/bazel/releases
</pre><p> Once you have bazel installed, simply run the following command in this examples directory to build the code: </p><pre class="fragment">$ bazel build :all
</pre><p> Then you can run the built binary: </p><pre class="fragment">$ bazel-bin/add_person_cpp addressbook.data
</pre><p> To use protobuf in your own bazel project, please follow instructions in the [BUILD](BUILD) file and [WORKSPACE](WORKSPACE) file.</p>
<h1><a class="anchor" id="autotoc_md111"></a>
Build the example using make</h1>
<p>You must install the protobuf package before you can build it using make. The minimum requirement is to install protocol compiler (i.e., the protoc binary) and the protobuf runtime for the language you want to build.</p>
<p>You can simply run "make" to build the example for all languages (except for Go). However, since different language has different installation requirement, it will likely fail. It's better to follow individual instructions below to build only the language you are interested in.</p>
<h2><a class="anchor" id="autotoc_md112"></a>
C++</h2>
<p>You can follow instructions in /mnt/文档/cpp/project/tinyrpc/thirdparty/protobuf-3.21.6/src/README.md "../src/README.md" to install protoc and protobuf C++ runtime from source.</p>
<p>Then run "make cpp" in this examples directory to build the C++ example. It will create two executables: add_person_cpp and list_people_cpp. These programs simply take an address book file as their parameter. The add_person_cpp programs will create the file if it doesn't already exist.</p>
<p>To run the examples: </p><pre class="fragment">$ ./add_person_cpp addressbook.data
$ ./list_people_cpp addressbook.data
</pre><p> Note that on some platforms you may have to edit the Makefile and remove "-lpthread" from the linker commands (perhaps replacing it with something else). We didn't do this automatically because we wanted to keep the example simple.</p>
<h2><a class="anchor" id="autotoc_md113"></a>
Python</h2>
<p>Follow instructions in /mnt/文档/cpp/project/tinyrpc/thirdparty/protobuf-3.21.6/README.md "../README.md" to install protoc and then follow ../python/README.md "../python/README.md" to install protobuf python runtime from source. You can also install python runtime using pip: </p><pre class="fragment">$ pip install protobuf
</pre><p> Make sure the runtime version is the same as protoc binary, or it may not work.</p>
<p>After you have install both protoc and python runtime, run "make python" to build two executables (shell scripts actually): add_person_python and list_people_python. They work the same way as the C++ executables.</p>
<h2><a class="anchor" id="autotoc_md114"></a>
Java</h2>
<p>Follow instructions in /mnt/文档/cpp/project/tinyrpc/thirdparty/protobuf-3.21.6/README.md "../README.md" to install protoc and then download protobuf Java runtime .jar file from maven: </p><pre class="fragment">https://mvnrepository.com/artifact/com.google.protobuf/protobuf-java
</pre><p> Then run the following: </p><pre class="fragment">$ export CLASSPATH=/path/to/protobuf-java-[version].jar
$ make java
</pre><p> This will create the add_person_java/list_people_java executables (shell scripts) and can be used to create/display an address book data file.</p>
<h2><a class="anchor" id="autotoc_md115"></a>
Go</h2>
<p>Follow instructions in /mnt/文档/cpp/project/tinyrpc/thirdparty/protobuf-3.21.6/README.md "../README.md" to install protoc. Then install the Go protoc plugin (protoc-gen-go): </p><pre class="fragment">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
</pre><p> The "go install" command will install protoc-gen-go into the GOBIN directory. You can set the $GOBIN environment variable before running "go install" to change the install location. Make sure the install directory is in your shell $PATH.</p>
<p>Build the Go samples with "make go". This creates the following executable files in the current directory: </p><pre class="fragment">add_person_go      list_people_go
</pre><p> To run the example: </p><pre class="fragment">./add_person_go addressbook.data
</pre><p> to add a person to the protocol buffer encoded file addressbook.data. The file is created if it does not exist. To view the data, run: </p><pre class="fragment">./list_people_go addressbook.data
</pre><p> Observe that the C++, Python, Java, and Dart examples in this directory run in a similar way and can view/modify files created by the Go example and vice versa.</p>
<h2><a class="anchor" id="autotoc_md116"></a>
Dart</h2>
<p>First, follow the instructions in /mnt/文档/cpp/project/tinyrpc/thirdparty/protobuf-3.21.6/README.md "../README.md" to install the Protocol Buffer Compiler (protoc).</p>
<p>Then, install the Dart Protocol Buffer plugin as described <a href="https://github.com/dart-lang/dart-protoc-plugin#how-to-build-and-use">here</a>. Note, the executable <code>bin/protoc-gen-dart</code> must be in your <code>PATH</code> for <code>protoc</code> to find it.</p>
<p>Build the Dart samples in this directory with <code>make dart</code>.</p>
<p>To run the examples:</p>
<div class="fragment"><div class="line">$ dart add_person.dart addressbook.data</div>
<div class="line">$ dart list_people.dart addressbook.data</div>
</div><!-- fragment --><p>The two programs take a protocol buffer encoded file as their parameter. The first can be used to add a person to the file. The file is created if it does not exist. The second displays the data in the file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
